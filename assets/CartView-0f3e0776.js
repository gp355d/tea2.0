import{_ as b,L as y,m as _,f as C,r as h,o as a,c as n,b as r,a as e,w as p,D as w,d as i,F as u,C as f,t as l,B as I,E as k,G as V}from"./index-fc53acef.js";import{c as g}from"./cart-c07dfcd8.js";import{s as L}from"./statusStore-d1ac195f.js";import"./sweetalert2.all-67e5945f.js";const{VITE_APP_URL:P,VITE_APP_PATH:$}={VITE_APP_URL:"https://vue3-course-api.hexschool.io/",VITE_APP_PATH:"leo533",BASE_URL:"/Vue3-week6/",MODE:"production",DEV:!1,PROD:!0},A={data(){return{products:[],productId:"",cart:{},form:{email:"",name:"",phone:"",address:"",msg:""},total:0}},components:{Loading:y},computed:{..._(g,["carts","final_total","isLoading","loadingItem"]),..._(L,["isLoading"])},methods:{...C(g,["getCarts","deleteItem","updateCartItem","clearCart"]),changeLoading(s){this.loadingItem=s},sendOrder(){if(this.cart.carts.length===0)alert("購物車清單內為空");else{const s={user:{name:this.form.name,email:this.form.email,tel:this.form.phone,address:this.form.address},message:this.form.msg};this.$http.post(`${P}v2/api/${$}/order`,{data:s}).then(o=>{this.getCarts(),this.loadingItem="",this.$refs.form.resetForm(),alert("訂單已送出")}).catch(o=>{alert(o.response.data.message)})}},validateTelephone(s){return/^(09)[0-9]{8}$/.test(s)?!0:"需要正確的手機號碼"}},mounted(){this.getCarts()}},E={class:"container py-8"},T=e("h2",{class:"text-center text-primary mb-7 fw-bold"},"購物車列表",-1),U={class:"row justify-content-center flex-column flex-md-row mb-4"},D={key:0,class:"col-md-6"},N={class:"row bg-white p-2"},S={class:"col-12 mb-3"},B={class:"text-end"},j=["disabled"],R={key:0,class:"fas fa-spinner fa-pulse"},F={class:"col-12"},M={class:"col-4 col-md-4"},O=["src"],q={class:"col-8 col-md-8"},H={class:"row mb-4"},K={class:"col-12 mb-0 position-relative"},x={class:"col-2 position-absolute top-0 end-0"},G=["onClick","disabled"],z=e("span",{class:"material-icons fs-2"},"delete",-1),J=[z],Q=["onUpdate:modelValue","onChange","disabled"],W=["value","Key"],X={class:"col-12 d-block"},Y={class:"col-12 mb-6"},Z={class:"d-flex justify-content-end align-items-center shadow-sm"},ee=e("span",{class:"fs-4 me-6"},"總金額",-1),se={class:"fs-5 text-end me-2"},te={class:"col-12 d-flex justify-content-end"},oe={key:1,class:"text-center"};function ae(s,o,ne,de,ie,le){var m;const v=h("loading"),c=h("router-link");return a(),n("div",E,[r(v,{active:s.isLoading,"onUpdate:active":o[0]||(o[0]=t=>s.isLoading=t)},null,8,["active"]),T,e("div",U,[(m=s.carts.carts)!=null&&m.length?(a(),n("div",D,[r(c,{to:"/products"},{default:p(()=>[i("回商品列表")]),_:1}),e("div",N,[e("div",S,[e("div",B,[e("button",{class:"btn btn-outline-danger",type:"button",onClick:o[1]||(o[1]=(...t)=>s.clearCart&&s.clearCart(...t)),disabled:s.loadingItem==="deleteAll"},[s.loadingItem==="deleteAll"?(a(),n("i",R)):w("",!0),i(" 清空購物車 ")],8,j)])]),e("div",F,[(a(!0),n(u,null,f(s.carts.carts,t=>(a(),n("div",{class:"row d-flex shadow-sm mb-3",key:t.id},[e("div",M,[e("img",{class:"object-fit w-100 img-fluid",src:t.product.imageUrl,alt:""},null,8,O)]),e("div",q,[e("div",H,[e("div",K,[i(l(t.product.title)+" ",1),e("div",x,[e("a",{class:"d-block",href:"#",onClick:I(()=>s.deleteItem(t),["prevent"]),disabled:t.id===s.loadingItem},J,8,G)])])]),k(e("select",{name:"",id:"",class:"form-select col-10","onUpdate:modelValue":d=>t.qty=d,onChange:()=>s.updateCartItem(t),disabled:t.id===s.loadingItem},[(a(),n(u,null,f(5,d=>e("option",{value:d,Key:d+"45678"},l(d),9,W)),64))],40,Q),[[V,t.qty]]),e("span",X,l(s.$filters.currency(t.product.price)),1)])]))),128))]),e("div",Y,[e("div",Z,[ee,e("span",se,l(s.$filters.currency(s.carts.total)),1)])]),e("div",te,[r(c,{to:"/order",class:"btn btn-primary"},{default:p(()=>[i("確認訂單")]),_:1})])])])):(a(),n("p",oe,"目前購物車為空的狀態喔!，再去選購吧~"))])])}const he=b(A,[["render",ae]]);export{he as default};
